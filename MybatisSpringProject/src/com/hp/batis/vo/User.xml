<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hp.batis.dao.UserDao">

	<!-- add user -->
	<insert id="addUser" useGeneratedKeys="true" parameterType="User">
		INSERT INTO USER
			(id,name,birthday,telephone,worktype)
		values
			(id,#{name},#{birthday},#{telephone},#{workType})
	</insert>
	
	<!-- retrieve user by id -->
	<select id="getUserById" parameterType="int" resultType="User">
		SELECT * FROM USER
		WHERE
			id = #{id}
	</select>
	
	<!-- update user -->
	<update id="updateUser" parameterType="User">
		UPDATE USER SET
			name = #{name},
			birthday = #{birthday},
			telephone = #{telephone},
			worktype = #{workType}
		WHERE
			id = #{id}
	</update>
	
	<!-- delete user -->
	<delete id="deleteUser" parameterType="User">
		DELETE FROM USER WHERE id = #{id}
	</delete>
	<delete id="deleteUserById" parameterType="int">
		DELETE FROM USER WHERE id = #{id}
	</delete>
	
	<resultMap type="User" id="UserMap">
		<result property="id" column="id"/>
		<result property="name" column="name"/>
		<result property="birthday" column="birthday"/>
		<result property="telephone" column="telephone"/>
		<result property="workType" column="worktype" jdbcType="VARCHAR" typeHandler="org.apache.ibatis.type.EnumTypeHandler"/>
	</resultMap>
	<select id="getUsers" resultType="User">
		SELECT * FROM USER;
	</select>
	<select id="getPartionUsers" resultMap="UserMap">
		SELECT id, name,birthday,telephone,worktype from USER;
	</select>
</mapper>